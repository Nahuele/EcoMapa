<div class="container mb-5 mt-3" >
  <h3 class="text-center">Registrar proyecto</h3>
  <br>
  <div class="row justify-content-md-center">
    <div *ngIf="alerta === true">
      <div *ngFor="let alert of alerts">
        <alert [type]="alert.type" [dismissOnTimeout]="alert.timeout" (onClosed)="onClosed(alert)">{{ alert.msg }}</alert>
      </div>
    </div>
  </div>
  <br>
  <form (submit)="submit()" [formGroup]="registerForm" >
    <div class="row">
      <div class="col">
        <div class="form-group">
          <label >Proyecto ID</label>
          <input type="text" class="form-control form-control-lg"
                 [ngClass]="{'is-invalid': registerForm.get('projectid').invalid}"
                 formControlName="projectid"
                 placeholder="PRO_Martín_García_ID" >
<!--          <div *ngIf="projectid.invalid &&-->
<!--          (projectid.dirty || projectid.touched)" >-->
<!--            <p style="color: red">El ID del proyecto es requerido</p>-->
<!--          </div>-->
          <div class="invalid-feedback">
            El ID del proyecto es requerido (sin espacios, minimo 8 caracteres)
          </div>
        </div>
      </div>

      <div class="col">
        <div class="form-group">
          <label>Nombre del Proyecto</label>
          <input type="text" class="form-control" formControlName="nombre">
        </div>
      </div>
      <div class="col">
        <div class="form-group">
          <label>email principal</label>
          <input type="email" class="form-control"
                 [ngClass]="{'is-invalid': registerForm.get('email').invalid}"
                 formControlName="email">
<!--          <div class="invalid-feedback">-->
<!--            email requerido-->
<!--          </div>-->
        </div>
<!--        <div *ngIf="email.invalid && !email.pristine">-->
<!--          <p *ngIf="email.errors.email" style="color: red">Un email es requerido</p>-->
<!--        </div>-->

      </div>

      <div class="col">
        <div class="form-group">
          <label for="tipo_enfoque">Tipo</label>
          <select class="form-control" id="tipo_enfoque"
                  [ngClass]="{'is-invalid': registerForm.get('tipo_enfoque').invalid}"
                  formControlName="tipo_enfoque">
            <option disabled selected>Seleccione tipo</option>
            <option>Conservacion</option>
            <option>Huertas</option>
          </select>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label>Enfoque</label>
        <input type="text" class="form-control" placeholder="Ecologia" formControlName="enfoque">
      </div>
      <div class="col">
        <label>Estado actual</label>
        <input type="text" class="form-control" placeholder="En curso" formControlName="estado_actual">
      </div>

    <div class="col">
      <label>Institucion</label>
      <input type="text" class="form-control" placeholder="Universidad del Litoral"  formControlName="institucion">
    </div>
    </div>
    <hr>
    <div class="form-group">
      <label for="titulo_extendido">Titulo extendido</label>
      <textarea class="form-control" id="titulo_extendido" formControlName="titulo_extendido" rows="1"></textarea>
    </div>
    <div class="form-group">
      <label for="descripcion_proyecto">Descripción</label>
      <textarea class="form-control" id="descripcion_proyecto" formControlName="descripcion" rows="2"></textarea>
    </div>
    <div class="form-group">
      <label for="resumen">Resumen</label>
      <textarea class="form-control" id="resumen" formControlName="resumen" rows="2"></textarea>
    </div>
    <div class="form-group">
      <label for="resultados">Resultados</label>
      <textarea class="form-control" id="resultados" formControlName="resultados" rows="1"></textarea>
    </div>
    <div formGroupName="redes_sociales">
      <div class="row">
        <div class="form-group col">
          <label>Facebook</label>
          <input type="text" class="form-control" formControlName="facebook">
        </div>
        <div class="form-group col">
          <label>Instagram</label>
          <input type="text" class="form-control" formControlName="instagram">
        </div>
        <div class="form-group col">
          <label>Twitter</label>
          <input type="text" class="form-control" formControlName="twitter">
        </div>
        <div class="form-group col">
          <label>Youtube</label>
          <input type="text" class="form-control" formControlName="youtube">
        </div>
        <div class="form-group col">
          <label>Research Gate</label>
          <input type="text" class="form-control" formControlName="researchgate">
        </div>
      </div>
    </div>
    <hr>
    <div >
      <div class="row justify-content-md-center"> <h5>Datos del lugar</h5> </div>
      <div class="row">
        <div class="col">
          <input type="text" class="form-control" placeholder="Pais" formControlName="pais">
        </div>
        <div class="col">
          <input type="text" class="form-control" placeholder="Provincia" formControlName="provincia">
        </div>
        <div class="col">
          <input type="text" class="form-control" placeholder="Ciudad" formControlName="ciudad">
        </div>
        <div class="col">
          <div class="form-group">
            <select class="form-control" formControlName="tipo_sitio" >
              <option value="" selected disabled>Seleccione tipo de sitio</option>
              <option>Parque Nacional</option>
              <option>Reserva Nacional</option>
              <option>Otro</option>
            </select>
          </div>
        </div>
      </div>
      <hr>
      <div class="row justify-content-md-center ">
        <div class="form-group col" tooltip="Lat,Long (sin espacios, separados por coma) Es a la inversa de Google">
          <label ><span>Coordenadas</span></label>
          <input type="text" class="form-control"
                 formControlName="coordenadas"
                 placeholder="-58.2595914,-34.1824176">
          <div *ngIf="coordenadas.invalid &&
          (coordenadas.dirty || coordenadas.touched)" >
            <p style="color: red">Coordenadas Obligatorias, es un mapa!</p>
          </div>
        </div>
        <div class="form-group col">
          <label>Año de inicio</label>
          <input type="text" class="form-control" formControlName="ano_inicio" placeholder="2020">
        </div>
        <div class="form-group col">
          <label>Tipo de estudio</label>
          <input type="text" class="form-control" formControlName="ano_inicio" placeholder="Especie exótica invasora">
        </div>
        <div class="form-group col">
          <label>Web</label>
          <input type="text" class="form-control" formControlName="web" >
        </div>
      </div>
    </div>
    <hr>

    <div class="form-group">
      <a class="btn btn-warning" type="button" (click)="agregarlinkimg()">Agregar Imagenes</a>
    </div>
    <div formGroupName="linksfotos" *ngFor="let link of linksfotos.controls; let i = index">
      <div [formGroupName]="i">
        <div class="form-group row justify-content-md-center">
          <label class="col-auto" [attr.for]="'link' + i">Link</label>
          <div class="col-auto">
            <input type="text" [attr.id]="'link' + i" class="form-control" formControlName="link">
          </div>
          <label class="col-auto" [attr.for]="'link' + i">Descripcion</label>
          <div class="col-auto">
            <input type="text" [attr.id]="'link' + i" class="form-control" formControlName="descripcionfoto">
          </div>
          <div class="col-auto">
            <button class="btn btn-danger" (click)="removerlinkimg(i)">Remover</button>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="form-group">
      <a class="btn btn-warning " type="button" (click)="agregarPersonal()">Agregar Personal</a>
      <div formGroupName="personal" *ngFor="let person of personal.controls; let x = index">
      <div [formGroupName]="x">
        <div class="row justify-content-md-center">
          <div class="col-auto">
            <label  [attr.for]="'link' + x">Nombre y Apellido</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="nombre_apellido">
          </div>
          <div class="col-auto">
            <label  [attr.for]="'link' + x">Rol</label>
<!--            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="rol">-->
            <div class="form-group">
              <select class="form-control" [attr.id]="'link' + x" formControlName="rol" >
                <option value="" selected disabled>Seleccione el rol</option>
                <option>Guardaparque</option>
                <option>Director</option>
                <option>Audiovisual</option>
                <option>Voluntario de campo</option>
                <option>Codirector/a</option>
                <option>Investigador principal</option>
                <option>Otro</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label [attr.for]="'link' + x">Género</label>
            <select class="form-control" [attr.id]="'link' + x" formControlName="genero" >
              <option value="" selected disabled></option>
              <option>Femenino</option>
              <option>Masculino</option>
              <option>Otro</option>
            </select>
          </div>
          <div class="col-auto">
            <label [attr.for]="'link' + x">Fecha de nacimiento</label>
            <input type="text"  class="form-control" bsDatepicker
              formControlName="fecha_nacimiento"[attr.id]="'link' + x" >
          </div>
        </div>
        <div class="row justify-content-md-center">
          <div class="col-auto">
            <label  [attr.for]="'link' + x">Pais de residencia</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="pais_residencia">
          </div>
          <div class="col-auto">
            <label  [attr.for]="'link' + x">Provincia de residencia</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="provincia_residencia">
          </div>
          <div class="col-auto">
            <label  [attr.for]="'link' + x">email</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="email_personal">
          </div>
          <div class="col-auto align-self-end">
            <button class="btn btn-danger" (click)="removerPersonal(x)">Remover</button>
          </div>
        </div>
        <br>
        <div class="row ">
          <div class="form-group col">
            <label [attr.for]="'link' + x">Facebook</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="facebook_personal" >
          </div>
          <div class="form-group col">
            <label [attr.for]="'link' + x">Instagram</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="instagram_personal" >
          </div>
          <div class="form-group col">
            <label [attr.for]="'link' + x">Twitter</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="twitter_personal" >
          </div>
          <div class="form-group col">
            <label [attr.for]="'link' + x">Youtube</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="youtube_personal" >
          </div>
          <div class="form-group col">
            <label [attr.for]="'link' + x">Research Gate</label>
            <input type="text" [attr.id]="'link' + x" class="form-control" formControlName="researchgate_personal" >
          </div>
        </div>
      </div>
        <hr>
      </div>
    </div>
    <h2>Registrar especies</h2>

    <form class="form" (submit)="submit()" [formGroup]="registerSpForm" >
      <div class="form-group" >
        <a class="btn btn-warning" type="button" (click)="agregarEspecie()">Agregar Especies</a>
        <div formGroupName="especies" *ngFor="let spp of especies.controls; let i = index">
          <div [formGroupName]="i">
            <div class="row justify-content-md-center">
              <div class="col-auto">
                <label [attr.for]="'link' + i">SPOB</label>
                <input type="text" [attr.id]="'link' + i" class="form-control" placeholder="Lontra provocax" formControlName="spob">
              </div>
              <div class="col-auto">
                <label [attr.for]="'link' + i">Nombre vulgar</label>
                <input type="text" [attr.id]="'link' + i" class="form-control" formControlName="nombre_vulgar">
              </div>
              <div class="form-group">
                <label [attr.for]="'link' + i">tso</label>
                <select class="form-control" [attr.id]="'link' + i" formControlName="tso" >
                  <option  [ngValue]="null" selected></option>
                  <option>Nativa</option>
                  <option>Invasora</option>
                  <option>Otro</option>
                </select>
              </div>
              <div class="col-auto">
                <button class="btn btn-danger" (click)="removerEspecie(i)">Remover</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
    <hr>
    <div class="row justify-content-md-center ">
      <div class="col-auto">
        <button class="btn btn-primary btn-lg"
                type="submit"
                [disabled]="!registerForm.valid"
                style="margin-top: 3rem">Enviar form
        </button>
      </div>
      <div class="col-auto">
        <button class="btn btn-light btn-lg"
                type="button"
                (click)="borrarForm()"
                style="margin-top: 3rem">Resetear
        </button>
      </div>
    </div>
  </form>
</div>


